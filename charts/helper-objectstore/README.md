

# helper-objectstore

  [![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)

  ![Version: 1.0.7](https://img.shields.io/badge/Version-1.0.7-informational?style=flat-square)

 

  ## Description

  A helper Chart to create BackingStore, BackingClass, BucketClaim and StorageClass objects, when ODF is used. Currently type PV is supported only (Creating a local Persistent Volume-backed backingstore)!

This Helm Chart is using OpenShift Data Foundation and will create a new ObjectStorage by rendering the objects:

1. BackingStore
2. BucketClass
3. StorageClass
4. BucketClaim

## Dependencies

This chart has the following dependencies:

| Repository | Name | Version |
|------------|------|---------|
| https://redhat-cop.github.io/helm-charts | tpl | ~1.0.0 |

This chart has no dependencies to other charts, but OpenShift Data Foundation must be deployed in order to use it. Or in other words: The CRDs like BackingStore or BucketClaim must exist on your cluster.

It is best used with a full GitOps approach such as Argo CD does. For example, https://github.com/tjungbauer/openshift-clusterconfig-gitops (folder clusters/management-cluster/setup-openshift-logging)

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| tjungbauer | <tjungbau@redhat.com> | <https://blog.stderr.at/> |

## Sources
Source:

Source code: https://redhat-cop.github.io/helm-charts/tree/main/charts/helper-objectstore

## Parameters

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| backingstore_name | string | `"backingstore"` | Name of the BackingStore |
| backingstore_size | string | `"700Gi"` | Size of the BackingStore that each volume shall have. |
| baseStorageClass | string | `"gp3-csi"` | The StorageClass the BackingStore is based on |
| bucket.enabled | bool | false | Shall a new bucket be enabled? |
| bucket.name | string | `"bucketname"` | Name of the bucket that shall be created |
| bucket.namespace | string | `"target-namespace"` | Target Namespace for that bucket. |
| bucket.storageclass | string | openshift-storage.noobaa.io | Name of the storageclass for our bucket |
| bucket.syncwave | int | 2 | Syncwave for bucketclaim creation. This should be done very early, but it depends on ODF. |
| enabled | bool | false | Enable objectstore configuration |
| limits_cpu | string | 500m | CPU Limit for the Noobaa Pod |
| limits_memory | string | 2Gi | Memory Limit for the Noobaa Pod. |
| pvPool.numOfVolumes | int | 1 | Number of volumes that shall be used |
| pvPool.type | string | `"pv-pool"` |  |
| storageclass_name | string | `"bucket-storage-class"` | Name of the StorageClass that shall be created for the bucket. |
| syncwave | int | `1` | Syncwave for Argo CD @default - 1 |

## Example values

```yaml
---
enabled: false
syncwave: 1
backingstore_name: backingstore
backingstore_size: 700Gi
limits_cpu: 500m
limits_memory: 2Gi

pvPool:
  numOfVolumes: 1
  type: pv-pool

baseStorageClass: gp3-csi

storageclass_name: bucket-storage-class

# Bucket that shall be created
bucket:
  enabled: true
  name: bucketname
  namespace: target-namespace
  syncwave: 2
  storageclass: bucket-storage-class

```

## Installing the Chart

To install the chart with the release name `my-release`:

```console
helm install my-release repo/<chart-name>>
```

The command deploys the chart on the Kubernetes cluster in the default configuration.

## Uninstalling the Chart

To uninstall/delete the my-release deployment:

```console
helm delete my-release
```

The command removes all the Kubernetes components associated with the chart and deletes the release.

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.12.0](https://github.com/norwoodj/helm-docs/releases/v1.12.0)
